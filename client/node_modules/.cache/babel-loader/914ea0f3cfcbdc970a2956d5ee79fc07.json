{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KYM\\\\Desktop\\\\calorie\\\\client\\\\src\\\\pages\\\\Register.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Helmet } from 'react-helmet-async';\nimport { Redirect, Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { WEBSITE_NAME } from 'src/utils/brand';\nimport TextInput from 'src/components/forms/TextInput';\nimport AsyncButton from 'src/components/buttons/AsyncButton';\nimport 'src/styles/Auth.scss';\nimport { login } from 'src/actions/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Register = ({\n  isAuthenticated,\n  login\n}) => {\n  _s();\n\n  const [state, setState] = useState({\n    username: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n    loading: false,\n    errors: []\n  });\n\n  const handleOnChange = async e => {\n    setState({ ...state,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleRegister = async e => {\n    e.preventDefault();\n    setState({ ...state,\n      errors: [],\n      loading: true\n    });\n    const {\n      username,\n      email,\n      password,\n      confirmPassword\n    } = state;\n\n    if (password !== confirmPassword) {\n      setState(prevState => ({ ...prevState,\n        errors: [{\n          param: 'confirmPassword',\n          msg: 'Passwords do not match'\n        }],\n        loading: false\n      }));\n      return;\n    }\n\n    const formData = {\n      username,\n      email,\n      password\n    };\n\n    try {\n      const res = await axios.post('auth/register', formData);\n      login(res.data);\n      setState(prevState => ({ ...prevState,\n        loading: false\n      }));\n    } catch (error) {\n      const {\n        response: {\n          data: {\n            errors\n          }\n        }\n      } = error;\n      setState(prevState => ({ ...prevState,\n        errors,\n        loading: false\n      }));\n    }\n  };\n\n  const {\n    username,\n    email,\n    password,\n    confirmPassword,\n    loading,\n    errors\n  } = state;\n\n  if (isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-box text-center p-5 m-5 mx-auto bg-light\",\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: `${WEBSITE_NAME} - Sign up`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form-signin\",\n      onSubmit: handleRegister,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"form-title h3 mb-5 font-weight-normal\",\n        children: \"Create an account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        name: \"username\",\n        value: username,\n        label: \"Username*\",\n        type: \"text\",\n        required: true,\n        errors: errors,\n        onChange: handleOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        name: \"email\",\n        value: email,\n        label: \"Email*\",\n        type: \"email\",\n        required: true,\n        errors: errors,\n        onChange: handleOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        name: \"password\",\n        value: password,\n        label: \"Password*\",\n        type: \"password\",\n        required: true,\n        errors: errors,\n        onChange: handleOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n        name: \"confirmPassword\",\n        value: confirmPassword,\n        label: \"Confirm Password*\",\n        type: \"password\",\n        required: true,\n        errors: errors,\n        onChange: handleOnChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-4\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Do you have an account already? log in\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n            style: {\n              fontWeight: '400'\n            },\n            to: \"/login\",\n            children: \"here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this), ' ']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AsyncButton, {\n        type: \"submit\",\n        text: \"Sign up\",\n        className: \"primary-button btn-lg rounded-pill mt-1 py-2 px-4\",\n        loading: loading,\n        disabled: !username || !email || !password || !confirmPassword\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"0yn//ccUX7fln6FIdKUcCHpDQaM=\");\n\n_c = Register;\n\nconst mapStateToProps = state => ({\n  isAuthenticated: state.auth.isAuthenticated\n});\n\nRegister.propTypes = {\n  isAuthenticated: PropTypes.bool.isRequired,\n  login: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, {\n  login\n})(Register);\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["C:/Users/KYM/Desktop/calorie/client/src/pages/Register.js"],"names":["React","useState","PropTypes","Helmet","Redirect","Link","connect","axios","WEBSITE_NAME","TextInput","AsyncButton","login","Register","isAuthenticated","state","setState","username","email","password","confirmPassword","loading","errors","handleOnChange","e","target","name","value","handleRegister","preventDefault","prevState","param","msg","formData","res","post","data","error","response","fontWeight","mapStateToProps","auth","propTypes","bool","isRequired","func"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\n\r\nimport { WEBSITE_NAME } from 'src/utils/brand';\r\nimport TextInput from 'src/components/forms/TextInput';\r\nimport AsyncButton from 'src/components/buttons/AsyncButton';\r\nimport 'src/styles/Auth.scss';\r\nimport { login } from 'src/actions/auth';\r\n\r\nconst Register = ({ isAuthenticated, login }) => {\r\n  const [state, setState] = useState({\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    loading: false,\r\n    errors: [],\r\n  });\r\n\r\n  const handleOnChange = async (e) => {\r\n    setState({ ...state, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleRegister = async (e) => {\r\n    e.preventDefault();\r\n    setState({ ...state, errors: [], loading: true });\r\n    const { username, email, password, confirmPassword } = state;\r\n\r\n    if (password !== confirmPassword) {\r\n      setState((prevState) => ({\r\n        ...prevState,\r\n        errors: [{ param: 'confirmPassword', msg: 'Passwords do not match' }],\r\n        loading: false,\r\n      }));\r\n\r\n      return;\r\n    }\r\n\r\n    const formData = { username, email, password };\r\n    try {\r\n      const res = await axios.post('auth/register', formData);\r\n\r\n      login(res.data);\r\n      setState((prevState) => ({\r\n        ...prevState,\r\n        loading: false,\r\n      }));\r\n    } catch (error) {\r\n      const {\r\n        response: {\r\n          data: { errors },\r\n        },\r\n      } = error;\r\n      setState((prevState) => ({ ...prevState, errors, loading: false }));\r\n    }\r\n  };\r\n\r\n  const { username, email, password, confirmPassword, loading, errors } = state;\r\n\r\n  if (isAuthenticated) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"form-box text-center p-5 m-5 mx-auto bg-light\">\r\n      <Helmet>\r\n        <title>{`${WEBSITE_NAME} - Sign up`}</title>\r\n      </Helmet>\r\n      <form className=\"form-signin\" onSubmit={handleRegister}>\r\n        <h1 className=\"form-title h3 mb-5 font-weight-normal\">\r\n          Create an account\r\n        </h1>\r\n\r\n        <TextInput\r\n          name=\"username\"\r\n          value={username}\r\n          label=\"Username*\"\r\n          type=\"text\"\r\n          required\r\n          errors={errors}\r\n          onChange={handleOnChange}\r\n        />\r\n        <TextInput\r\n          name=\"email\"\r\n          value={email}\r\n          label=\"Email*\"\r\n          type=\"email\"\r\n          required\r\n          errors={errors}\r\n          onChange={handleOnChange}\r\n        />\r\n        <TextInput\r\n          name=\"password\"\r\n          value={password}\r\n          label=\"Password*\"\r\n          type=\"password\"\r\n          required\r\n          errors={errors}\r\n          onChange={handleOnChange}\r\n        />\r\n        <TextInput\r\n          name=\"confirmPassword\"\r\n          value={confirmPassword}\r\n          label=\"Confirm Password*\"\r\n          type=\"password\"\r\n          required\r\n          errors={errors}\r\n          onChange={handleOnChange}\r\n        />\r\n\r\n        <div className=\"my-4\">\r\n          <p>\r\n            Do you have an account already? log in{' '}\r\n            <Link style={{ fontWeight: '400' }} to=\"/login\">\r\n              here\r\n            </Link>{' '}\r\n          </p>\r\n        </div>\r\n\r\n        <AsyncButton\r\n          type=\"submit\"\r\n          text=\"Sign up\"\r\n          className=\"primary-button btn-lg rounded-pill mt-1 py-2 px-4\"\r\n          loading={loading}\r\n          disabled={!username || !email || !password || !confirmPassword}\r\n        />\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  isAuthenticated: state.auth.isAuthenticated,\r\n});\r\n\r\nRegister.propTypes = {\r\n  isAuthenticated: PropTypes.bool.isRequired,\r\n  login: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(mapStateToProps, { login })(Register);\r\n"]},"metadata":{},"sourceType":"module"}