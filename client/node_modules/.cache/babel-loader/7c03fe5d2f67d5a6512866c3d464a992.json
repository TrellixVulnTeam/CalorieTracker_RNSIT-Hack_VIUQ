{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\Desktop\\\\CalFit\\\\client\\\\src\\\\pages\\\\MyFoods.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Helmet } from 'react-helmet-async';\nimport Modal from 'bootstrap/js/dist/modal';\nimport { WEBSITE_NAME } from 'src/utils/brand';\nimport FoodList from 'src/components/my-foods/FoodList';\nimport AddFood from 'src/components/my-foods/AddFood';\nimport EditFood from 'src/components/my-foods/EditFood';\nimport DeleteFood from 'src/components/my-foods/DeleteFood';\nimport 'src/styles/MyFoods.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst MyFoods = () => {\n  _s();\n\n  // Modals refs\n  const addModalRef = useRef();\n  const editModalRef = useRef();\n  const deleteModalRef = useRef();\n  const [state, setState] = useState({\n    foods: [],\n    target: null,\n    // Edit or delete modal target\n    addOpen: false,\n    editOpen: false,\n    deleteOpen: false,\n    loading: true\n  });\n  useEffect(() => {\n    getFoods();\n  }, []); // We use this to open the add modal when addOpen state changes\n\n  useEffect(() => {\n    const {\n      addOpen\n    } = state;\n\n    if (addOpen) {\n      const modalEle = addModalRef.current;\n      const bsModal = new Modal(modalEle);\n      bsModal.show();\n    }\n  }, [state.addOpen]); // We use this to open the edit modal when editOpen state changes\n\n  useEffect(() => {\n    const {\n      editOpen\n    } = state;\n\n    if (editOpen) {\n      const modalEle = editModalRef.current;\n      const bsModal = new Modal(modalEle);\n      bsModal.show();\n    }\n  }, [state.editOpen]); // We use this to open the delete modal when deleteOpen state changes\n\n  useEffect(() => {\n    const {\n      deleteOpen\n    } = state;\n\n    if (deleteOpen) {\n      const modalEle = deleteModalRef.current;\n      const bsModal = new Modal(modalEle);\n      bsModal.show();\n    }\n  }, [state.deleteOpen]);\n\n  const getFoods = async () => {\n    setState({ ...state,\n      loading: true\n    });\n    const res = await axios.get('foods/available');\n    setState(prevState => ({ ...prevState,\n      foods: res.data,\n      loading: false\n    }));\n  };\n\n  const handleOpenAdd = () => {\n    setState({ ...state,\n      addOpen: true\n    });\n  };\n\n  const handleCloseAdd = () => {\n    setState({ ...state,\n      addOpen: false\n    });\n  };\n\n  const handleOpenEdit = async e => {\n    const {\n      foods\n    } = state;\n    const foodId = e.target.getAttribute('data-id'); // We get the edit target\n\n    const target = foods.find(food => food._id === foodId);\n    setState({ ...state,\n      target,\n      editOpen: true\n    });\n  };\n\n  const handleCloseEdit = () => {\n    setState({ ...state,\n      target: null,\n      editOpen: false\n    });\n  };\n\n  const handleOpenDelete = async e => {\n    const {\n      foods\n    } = state;\n    const foodId = e.target.getAttribute('data-id'); // We get the delete target\n\n    const target = foods.find(food => food._id === foodId);\n    setState({ ...state,\n      target,\n      deleteOpen: true\n    });\n  };\n\n  const handleCloseDelete = () => {\n    setState({ ...state,\n      target: null,\n      deleteOpen: false\n    });\n  };\n\n  const {\n    foods,\n    target,\n    addOpen,\n    editOpen,\n    deleteOpen,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: `${WEBSITE_NAME} - My Foods`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"primary-text\",\n      children: [\" \", 'My Foods']\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-row-reverse bd-highlight\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 bd-highlight\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"primary-button btn-lg rounded-pill mt-4 ms-0 ms-sm-4\",\n          type: \"button\",\n          onClick: handleOpenAdd,\n          children: \"Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FoodList, {\n      foods: foods,\n      loading: loading,\n      handleOpenEdit: handleOpenEdit,\n      handleOpenDelete: handleOpenDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), addOpen && /*#__PURE__*/_jsxDEV(AddFood, {\n      modalRef: addModalRef,\n      handleRefresh: getFoods,\n      handleClose: handleCloseAdd,\n      handleGetFoods: getFoods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 9\n    }, this), editOpen && /*#__PURE__*/_jsxDEV(EditFood, {\n      modalRef: editModalRef,\n      target: target,\n      handleClose: handleCloseEdit,\n      handleGetFoods: getFoods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }, this), deleteOpen && /*#__PURE__*/_jsxDEV(DeleteFood, {\n      modalRef: deleteModalRef,\n      target: target,\n      handleClose: handleCloseDelete,\n      handleGetFoods: getFoods\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MyFoods, \"iAaXaFTSuWmFRWDQG7QY1U8+nIU=\");\n\n_c = MyFoods;\nexport default MyFoods;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyFoods\");","map":{"version":3,"names":["React","useRef","useEffect","useState","axios","Helmet","Modal","WEBSITE_NAME","FoodList","AddFood","EditFood","DeleteFood","MyFoods","addModalRef","editModalRef","deleteModalRef","state","setState","foods","target","addOpen","editOpen","deleteOpen","loading","getFoods","modalEle","current","bsModal","show","res","get","prevState","data","handleOpenAdd","handleCloseAdd","handleOpenEdit","e","foodId","getAttribute","find","food","_id","handleCloseEdit","handleOpenDelete","handleCloseDelete"],"sources":["C:/Users/Admin/OneDrive/Desktop/CalFit/client/src/pages/MyFoods.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport Modal from 'bootstrap/js/dist/modal';\r\n\r\nimport { WEBSITE_NAME } from 'src/utils/brand';\r\nimport FoodList from 'src/components/my-foods/FoodList';\r\nimport AddFood from 'src/components/my-foods/AddFood';\r\nimport EditFood from 'src/components/my-foods/EditFood';\r\nimport DeleteFood from 'src/components/my-foods/DeleteFood';\r\nimport 'src/styles/MyFoods.scss';\r\n\r\nconst MyFoods = () => {\r\n  // Modals refs\r\n  const addModalRef = useRef();\r\n  const editModalRef = useRef();\r\n  const deleteModalRef = useRef();\r\n\r\n  const [state, setState] = useState({\r\n    foods: [],\r\n    target: null, // Edit or delete modal target\r\n    addOpen: false,\r\n    editOpen: false,\r\n    deleteOpen: false,\r\n    loading: true,\r\n  });\r\n\r\n  useEffect(() => {\r\n    getFoods();\r\n  }, []);\r\n\r\n  // We use this to open the add modal when addOpen state changes\r\n  useEffect(() => {\r\n    const { addOpen } = state;\r\n    if (addOpen) {\r\n      const modalEle = addModalRef.current;\r\n      const bsModal = new Modal(modalEle);\r\n      bsModal.show();\r\n    }\r\n  }, [state.addOpen]);\r\n\r\n  // We use this to open the edit modal when editOpen state changes\r\n  useEffect(() => {\r\n    const { editOpen } = state;\r\n    if (editOpen) {\r\n      const modalEle = editModalRef.current;\r\n      const bsModal = new Modal(modalEle);\r\n      bsModal.show();\r\n    }\r\n  }, [state.editOpen]);\r\n\r\n  // We use this to open the delete modal when deleteOpen state changes\r\n  useEffect(() => {\r\n    const { deleteOpen } = state;\r\n    if (deleteOpen) {\r\n      const modalEle = deleteModalRef.current;\r\n      const bsModal = new Modal(modalEle);\r\n      bsModal.show();\r\n    }\r\n  }, [state.deleteOpen]);\r\n\r\n  const getFoods = async () => {\r\n    setState({\r\n      ...state,\r\n      loading: true,\r\n    });\r\n\r\n    const res = await axios.get('foods/available');\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      foods: res.data,\r\n      loading: false,\r\n    }));\r\n  };\r\n\r\n  const handleOpenAdd = () => {\r\n    setState({ ...state, addOpen: true });\r\n  };\r\n\r\n  const handleCloseAdd = () => {\r\n    setState({ ...state, addOpen: false });\r\n  };\r\n\r\n  const handleOpenEdit = async (e) => {\r\n    const { foods } = state;\r\n    const foodId = e.target.getAttribute('data-id');\r\n\r\n    // We get the edit target\r\n    const target = foods.find((food) => food._id === foodId);\r\n\r\n    setState({ ...state, target, editOpen: true });\r\n  };\r\n\r\n  const handleCloseEdit = () => {\r\n    setState({ ...state, target: null, editOpen: false });\r\n  };\r\n\r\n  const handleOpenDelete = async (e) => {\r\n    const { foods } = state;\r\n    const foodId = e.target.getAttribute('data-id');\r\n\r\n    // We get the delete target\r\n    const target = foods.find((food) => food._id === foodId);\r\n\r\n    setState({ ...state, target, deleteOpen: true });\r\n  };\r\n\r\n  const handleCloseDelete = () => {\r\n    setState({ ...state, target: null, deleteOpen: false });\r\n  };\r\n\r\n  const { foods, target, addOpen, editOpen, deleteOpen, loading } = state;\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`${WEBSITE_NAME} - My Foods`}</title>\r\n      </Helmet>\r\n      <h3 className=\"primary-text\"> {'My Foods'}</h3>\r\n      <div className=\"d-flex flex-row-reverse bd-highlight\">\r\n        <div className=\"p-2 bd-highlight\">\r\n          <button\r\n            className=\"primary-button btn-lg rounded-pill mt-4 ms-0 ms-sm-4\"\r\n            type=\"button\"\r\n            onClick={handleOpenAdd}\r\n          >\r\n            Add\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <FoodList\r\n        foods={foods}\r\n        loading={loading}\r\n        handleOpenEdit={handleOpenEdit}\r\n        handleOpenDelete={handleOpenDelete}\r\n      />\r\n      {addOpen && (\r\n        <AddFood\r\n          modalRef={addModalRef}\r\n          handleRefresh={getFoods}\r\n          handleClose={handleCloseAdd}\r\n          handleGetFoods={getFoods}\r\n        />\r\n      )}\r\n      {editOpen && (\r\n        <EditFood\r\n          modalRef={editModalRef}\r\n          target={target}\r\n          handleClose={handleCloseEdit}\r\n          handleGetFoods={getFoods}\r\n        />\r\n      )}\r\n      {deleteOpen && (\r\n        <DeleteFood\r\n          modalRef={deleteModalRef}\r\n          target={target}\r\n          handleClose={handleCloseDelete}\r\n          handleGetFoods={getFoods}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MyFoods;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}